<!DOCTYPE html>
<html lang="fa" dir="rtl" class="antialiased">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>خانه | ویدیو با کنترل اسکرول</title>
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <style>
        /* پس‌زمینه شیک با گرادیان، مناسب برای حالت روشن و تیره */
        .site-bg {
            background:
                radial-gradient(900px 400px at 100% 0%, rgba(99,102,241,0.14), transparent 60%),
                radial-gradient(900px 400px at 0% 100%, rgba(236,72,153,0.12), transparent 60%),
                linear-gradient(180deg, #0b1020, #0d1326);
        }
        @media (prefers-color-scheme: light) {
            .site-bg {
                background:
                    radial-gradient(900px 400px at 100% 0%, rgba(99,102,241,0.10), transparent 60%),
                    radial-gradient(900px 400px at 0% 100%, rgba(236,72,153,0.08), transparent 60%),
                    linear-gradient(180deg, #f8fafc, #eef2ff);
            }
        }
        .glass {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
        }
        @media (prefers-color-scheme: light) {
            .glass { background: rgba(255,255,255,0.75); }
        }
        .video-cover { object-fit: cover; object-position: center; }
    </style>
</head>
<body class="site-bg min-h-screen text-slate-100 dark:text-slate-100">

<!-- نوار بالا -->
<header class="sticky top-0 z-30 backdrop-blur glass border-b border-white/10">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between text-slate-900 dark:text-white">
        <div class="font-extrabold text-lg">صفحه اصلی</div>
        <nav class="hidden sm:flex items-center gap-5 text-sm">
            <a class="hover:text-indigo-500 transition" href="#video">ویدیو</a>
            <a class="hover:text-indigo-500 transition" href="#features">ویژگی‌ها</a>
            <a class="hover:text-indigo-500 transition" href="#contact">تماس</a>
        </nav>
    </div>
</header>

<!-- بخش معرفی کوتاه قبل از ویدیو (برای تست اسکرول) -->
<section class="max-w-6xl mx-auto px-4 py-12 sm:py-16 text-slate-900 dark:text-white">
    <div class="rounded-2xl glass border border-white/10 shadow-xl p-6 sm:p-10">
        <h1 class="text-2xl sm:text-3xl md:text-4xl font-extrabold">صفحه خانه با پخش ویدیو هوشمند</h1>
        <p class="mt-3 text-sm sm:text-base text-slate-700 dark:text-slate-300">
            به پایین اسکرول کنید تا ویدیو را ببینید. هنگام اسکرول رو به پایین ویدیو متوقف می‌شود، و وقتی رو به بالا اسکرول می‌کنید و ویدیو در دید باشد، دوباره پخش می‌شود.
        </p>
    </div>
</section>

<!-- بخش ویدیو -->
<section id="video" class="relative">
    <div class="max-w-6xl mx-auto px-4">
        <div class="rounded-3xl overflow-hidden border border-white/10 shadow-2xl">
            <!-- نسبت 16:9 -->
            <div class="w-full" style="position:relative;padding-top:56.25%;">
                <video
                    id="heroVideo"
                    style="position:absolute;inset:0;width:100%;height:100%;"
                    class="video-cover"
                    autoplay
                    muted
                    loop
                    playsinline
                    aria-label="ویدیوی صفحه اصلی"
                >
                    <!-- می‌توانید لینک را با کلیپ دلخواه از Vecteezy جایگزین کنید -->
                    <source src="https://static.vecteezy.com/system/resources/previews/023/517/928/mp4/abstract-gradient-liquid-shape-motion-graphics-free-video.mp4" type="video/mp4">
                    <source src="https://static.vecteezy.com/system/resources/previews/011/323/987/mp4/abstract-neon-lines-4k-motion-background-free-video.mp4" type="video/mp4">
                </video>
            </div>
        </div>
    </div>
</section>

<!-- محتوای بیشتر برای ایجاد اسکرول -->
<section id="features" class="max-w-6xl mx-auto px-4 py-16 sm:py-24 text-slate-900 dark:text-white">
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
        <div class="glass rounded-2xl p-6 border border-white/10">
            <h3 class="font-bold text-lg">سبک و سریع</h3>
            <p class="mt-2 text-sm text-slate-700 dark:text-slate-300">بدون نیاز به افزونه‌های سنگین.</p>
        </div>
        <div class="glass rounded-2xl p-6 border border-white/10">
            <h3 class="font-bold text-lg">سازگار با حالت‌ها</h3>
            <p class="mt-2 text-sm text-slate-700 dark:text-slate-300">هماهنگ با حالت روشن و تیره.</p>
        </div>
        <div class="glass rounded-2xl p-6 border border-white/10">
            <h3 class="font-bold text-lg">تجربه هوشمند</h3>
            <p class="mt-2 text-sm text-slate-700 dark:text-slate-300">پخش و توقف مطابق جهت اسکرول.</p>
        </div>
    </div>
</section>

<footer id="contact" class="mt-8 border-t border-white/10">
    <div class="max-w-6xl mx-auto px-4 py-10 text-sm text-slate-300">
        ساخته‌شده با عشق ✨
    </div>
</footer>

<!-- اسکریپت کنترل پخش بر اساس اسکرول -->
<script>
    (function () {
        const video = document.getElementById('heroVideo');
        let lastY = window.scrollY;
        let isVisible = false;

        // رصد دیده‌شدن ویدیو
        const io = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                isVisible = entry.isIntersecting && entry.intersectionRatio > 0.1;

                // اگر از دید خارج شد، متوقف شود
                if (!isVisible && !video.paused) {
                    try { video.pause(); } catch(e) {}
                }
            });
        }, { threshold: [0, 0.1, 0.25, 0.5, 0.75, 1] });

        io.observe(video);

        // کنترل بر اساس جهت اسکرول
        window.addEventListener('scroll', () => {
            const y = window.scrollY;
            const scrollingDown = y > lastY + 1; // آستانه کوچک برای جلوگیری از نوسان

            if (scrollingDown) {
                // اسکرول به پایین → توقف
                if (!video.paused) {
                    try { video.pause(); } catch(e) {}
                }
            } else {
                // اسکرول به بالا → اگر ویدیو دیده می‌شود پخش شود
                if (isVisible) {
                    const p = video.play();
                    if (p && typeof p.catch === 'function') { p.catch(()=>{}); }
                }
            }
            lastY = y;
        }, { passive: true });

        // در شروع: اگر دیده نمی‌شود، پخش نکند
        window.addEventListener('load', () => {
            if (!isVisible && !video.paused) {
                try { video.pause(); } catch(e) {}
            }
        });
    })();
</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'980790d451a249b7',t:'MTc1ODEwMTIyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
